# Project Agents.md Guide for AI agentic developer

This Agents.md file provides comprehensive guidance for AI agentic developers working with this codebase.

## Project Structure for AI agentic developer

ROOT/
├── .github - Contains github actions and other settings for github
├── cmd - Contains command-line application entry points
│   └── service - Main service entry point
├── internal - Contains internal packages and modules
│   ├── contracts - API contracts and interface definitions
│   ├── middleware - HTTP middleware components
│   ├── model - Domain models and data structures
│   ├── repositories - Data access layer implementations
│   └── usecase - Business logic and use case implementations
├── migrations - Database migration scripts
├── pkg - Shared utility packages
├── web/ - Frontend application directory
│   ├── src/ - Source code for web application
│   │   ├── lib/ - Shared libraries and utilities
│   │   │   ├── actions - Svelte actions and form handlers
│   │   │   ├── api/ - API client and communication layer
│   │   │   │   └── client.ts
│   │   │   ├── components - Reusable UI components
│   │   │   ├── stores - State management stores
│   │   │   ├── theme - Theme configuration and styling
│   │   │   ├── toast - Toast notification system
│   │   │   ├── utils - Utility functions and helpers
│   │   │   └── types.ts
│   │   ├── routes/ - SvelteKit routing and pages
│   │   │   ├── game/ - Game-related pages and routes
│   │   │   │   └── [gameId]/ - Dynamic game page by ID
│   │   │   │       └── +page.svelte
│   │   │   ├── +layout.svelte
│   │   │   └── +page.svelte
│   │   ├── app.css
│   │   ├── app.html
│   │   └── hooks.server.ts
│   ├── static/ - Static assets served directly
│   │   └── fonts/ - Font files and typography assets
│   │       └── pribambas.ttf
│   ├── svelte.config.js
│   ├── tsconfig.json
│   ├── vite.config.ts
│   └── package.json
├── ARCHITECTURE.md
├── DESIGN-SYSTEM.md
├── dev.sh - Development environment setup script
├── Dockerfile - Container configuration for deployment
├── go.mod
└── start.sh - Production startup script

## Coding Conventions for AI agentic developer

### General Conventions for Agents.md Implementation

- Use Golang v1.24+ for all new code generated by AI agentic developer
- AI agentic developer should follow the existing code style in each file
- Agents.md requires meaningful variable and function names in AI agentic developer output
- AI agentic developer should add comments ONLY for complex logic as guided by Agents.md
- AI agentic developer have to use DOMAIN DRIVEN DESIGN and TEST DRIVEN DEVELOPMENT approaches when implement new features

### Golang Guidelines for AI agentic developer

- AI agentic developer should define dependency interfaces in deps.go for each new struct. In the file just describe dependency interfaces without any imports. Imports packages only if it necessary! 
- AI agentic developer mustn't use "internal/deps.go" for define non global dependency!
- Return values should be copy of struct NOT a pointer. Only err can be an interface
- Define DB transactions in usecases or services using trmManager interface. Initialize transactions ONLY in usecases or services. Example:
```golang
trmManager interface {
		Do(context.Context, func(ctx context.Context) error) error
	}
```
- Use the following construction in repositories when need call SQL. Example:
```golang
import (
	"context"

	trmsqlx "github.com/avito-tech/go-transaction-manager/drivers/sqlx/v2"
	"github.com/jmoiron/sqlx"
)

func NewRepository(sqlx *sqlx.DB, tx *trmsqlx.CtxGetter) *Repository {
	return &Repository{sqlx: sqlx, tx: tx}
}

func (r *Repository) db(ctx context.Context) trmsqlx.Tr {
	return r.tx.DefaultTrOrDB(ctx, r.sqlx)
}
```
- All SQL queries should be written in lowercase.
- In any repository method, AI agentic developer must not use named SQL calling. Use placeholders like `$1`, `$2`, `$3`, etc., in SQL queries.


### Migrations Guidelines for AI agentic developer

- Write all new migrations in the `migrations/postgresql/master` directory.
- Use the naming convention `YYYY-MM-DD-NNN-description.sql` for migration files, where `NNN` is a three-digit number (e.g., `001`, `002`, etc.) and `description` is a short, descriptive name of the migration (e.g., `create-license-table`).
- Use PostgreSQL syntax in all new migrations generated by AI agentic developer.
- Each migration should have only an `up` direction. Do not include a `down` direction. Avoid adding `UP` and `DOWN` tags in the migration file.
- All SQL queries should be written in lowercase.
- Always ensure that the migration file is idempotent and can be safely applied multiple times without causing errors.
- Include comments in the migration file to explain the purpose of the migration and any complex logic.
- Avoid using DDL statements that are not supported by the target PostgreSQL version.
- Keep migration files focused on a single task or change to maintain clarity and simplicity.
- Example migration file:
  ```sql
  -- 2025-08-07-011-create-license-table.sql

  create table license (
      id uuid primary key,
      name text not null,
      created_at timestamp with time zone not null default now()
  );
  ```